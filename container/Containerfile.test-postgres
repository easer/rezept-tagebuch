FROM python:3.11-slim

WORKDIR /app

# Version als Build Argument
ARG APP_VERSION=test-postgres

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY app_new.py .
COPY models.py .
COPY config.py .
COPY index.html .
COPY config/recipe-format-config.json .
COPY config/themealdb-config.json .

# ENV Variable setzen
ENV APP_VERSION=${APP_VERSION}
ENV DB_TYPE=postgresql
ENV POSTGRES_HOST=seaser-postgres
ENV POSTGRES_PASSWORD=seaser

EXPOSE 80

# Use app_new.py for PostgreSQL testing
CMD ["python", "app_new.py"]
